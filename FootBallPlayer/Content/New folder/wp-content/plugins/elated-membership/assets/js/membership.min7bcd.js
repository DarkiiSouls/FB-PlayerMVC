if(function(e,t,l){var a,s=e.getElementsByTagName(t)[0];e.getElementById(l)||(a=e.createElement(t),a.id=l,a.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(a,s))}(document,"script","facebook-jssdk"),"undefined"!=typeof eltdfSocialLoginVars)var facebookAppId=eltdfSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(e){"use strict";function t(){i(),n(),r(),o(),g(),v(),k(),w(),y(),C(),A()}function l(){f(),m(),b()}function a(){}function s(){}function i(){var t=e(".eltdf-login-opener"),l=e(".eltdf-login-register-holder");if(e(document.body).on("open_user_login_trigger",function(){l.fadeIn(300),l.addClass("opened")}),t){var a=e(".eltdf-login-register-content");t.click(function(e){e.preventDefault(),l.fadeIn(300),l.addClass("opened")}),l.click(function(e){l.hasClass("opened")&&(l.fadeOut(300),l.removeClass("opened"))}),a.click(function(e){e.stopPropagation()}),e(window).on("keyup",function(e){l.hasClass("opened")&&27==e.keyCode&&(l.fadeOut(300),l.removeClass("opened"))}),a.tabs()}}function n(){e(".eltdf-login-form").on("submit",function(t){t.preventDefault();var l={action:"eltdf_membership_login_user",security:e(this).find("#eltdf-login-security").val(),login_data:e(this).serialize()};return e.ajax({type:"POST",data:l,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;t=JSON.parse(e),d(t),"success"==t.status&&(window.location=t.redirect)}}),!1})}function r(){e(".eltdf-register-form").on("submit",function(t){t.preventDefault();var l={action:"eltdf_membership_register_user",security:e(this).find("#eltdf-register-security").val(),register_data:e(this).serialize()};return e.ajax({type:"POST",data:l,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;t=JSON.parse(e),d(t),"success"==t.status&&(window.location=t.redirect)}}),!1})}function o(){var t=e(".eltdf-reset-pass-form");t.submit(function(l){l.preventDefault();var a={action:"eltdf_membership_user_lost_password",user_login:t.find("#user_reset_password_login").val()};e.ajax({type:"POST",data:a,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);d(t),"success"==t.status&&(window.location=t.redirect)}})})}function d(t){var l,a=e(".eltdf-membership-response-holder"),s=_.template(e(".eltdf-membership-response-template").html());l="success"===t.status?"eltdf-membership-message-succes":"eltdf-membership-message-error";var i={messageClass:l,message:t.message},n=s(i);a.html(n)}function f(){e(".eltdf-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){c(e)},{scope:"email, public_profile"})})}function c(e){"connected"===e.status?p():"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")}function p(){console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(t){var l=e(".eltdf-facebook-login-holder [name^=eltdf_nonce_facebook_login]").val();t.nonce=l,t.image=t.picture.data.url;var a={action:"eltdf_membership_check_facebook_user",response:t};e.ajax({type:"POST",data:a,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;t=JSON.parse(e),d(t),"success"==t.status&&(window.location=t.redirect)}})})}function m(){if("undefined"!=typeof eltdfSocialLoginVars)var t=eltdfSocialLoginVars.social.googleClientId;if(t)gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:t}),h()});else{e(".eltdf-google-login-holder").submit(function(e){e.preventDefault()})}}function h(){e(".eltdf-google-login-holder").submit(function(e){e.preventDefault(),window.auth2.signIn(),u()})}function u(){if(window.auth2.isSignedIn.get()){var t=window.auth2.currentUser.get(),l=t.getBasicProfile(),a=e(".eltdf-google-login-holder [name^=eltdf_nonce_google_login]").val(),s={id:l.getId(),name:l.getName(),email:l.getEmail(),image:l.getImageUrl(),link:"https://plus.google.com/"+l.getId(),nonce:a},i={action:"eltdf_membership_check_google_user",response:s};e.ajax({type:"POST",data:i,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;t=JSON.parse(e),d(t),"success"==t.status&&(window.location=t.redirect)}})}}function g(){var t=e("#eltdf-membership-update-profile-form");if(t.length){var l=t.find("button"),a=l.data("updating-text"),s=l.data("updated-text");t.on("submit",function(t){t.preventDefault();var i=l.html();l.html(a);var n={action:"eltdf_membership_update_user_profile",data:e(this).serialize()};return e.ajax({type:"POST",data:n,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;t=JSON.parse(e),d(t),"success"==t.status?(l.html(s),window.location=t.redirect):l.html(i)}}),!1})}}function b(){var t=(e(".eltdf-membership-main-wrapper"),e(".page-template-user-dashboard .eltdf-content > .eltdf-content-inner > .eltdf-container")),l=e(".eltdf-page-footer"),a=e(".eltdf-content-bottom"),s=0;if(!eltdf.body.hasClass("eltdf-header-transparent")&&eltdf.windowWidth>1024&&(s=s+eltdfGlobalVars.vars.eltdfMenuAreaHeight+eltdfGlobalVars.vars.eltdfLogoAreaHeight),l.length>0&&(s+=l.outerHeight()),a.length>0&&(s+=a.outerHeight()),eltdf.windowWidth>1024){var i=eltdf.windowHeight-s;t.css({"min-height":i+"px"})}}function v(){e(".eltdf-membership-input.datepicker").datepicker({dateFormat:"MM dd, yy"})}function w(){function t(t){l(t),a(t),t.find("> .eltdf-membership-repeater-add .eltdf-clone").on("click",function(l){l.preventDefault();var a=e(this);s(t,a)})}function l(t){t.find(".eltdf-clone-remove").on("click",function(t){t.preventDefault();var l,a=e(this),s=a.closest(".eltdf-membership-repeater-fields-row"),i=a.closest(".eltdf-membership-repeater-fields-holder"),n=!!i.hasClass("eltdf-enable-pc");if(i.hasClass("eltdf-table-layout"))l=i.find("tbody tr.eltdf-membership-repeater-fields-row");else if(n){var r=a.data("name");l=i.find("> .eltdf-membership-repeater-fields-row[data-name="+r+"]")}else l=i.find("> .eltdf-membership-repeater-fields-row");1==l.length?(s.find(":input").val("").removeAttr("checked").removeAttr("selected"),s.hide()):s.remove()})}function a(t){var l,a=t.find("> .eltdf-membership-repeater-fields-holder");l=a.hasClass("eltdf-table-layout")?a.find("tbody tr.eltdf-membership-repeater-fields-row"):a.find("> .eltdf-membership-repeater-fields-row"),l.each(function(){var t=e(this);t.hasClass("eltdf-initially-hidden")&&t.hide()})}function s(a,s){function i(t){var l=t.parents(".eltdf-membership-gallery-holder").find(".eltdf-membership-gallery-images-holder"),a=t.siblings(".eltdf-membership-remove-image");t.removeClass("eltdf-binded"),a.removeClass("eltdf-binded"),l.empty(),t.siblings(".eltdf-membership-gallery-upload-hidden").each(function(t){e(this).val("")})}var n,r=a.find("> .eltdf-membership-repeater-fields-holder"),o=!!r.hasClass("eltdf-enable-pc");if(r.hasClass("eltdf-table-layout"))n=r.find("tbody tr.eltdf-membership-repeater-fields-row");else if(o){var d=s.data("name");n=r.find("> .eltdf-membership-repeater-fields-row[data-name="+d+"]")}else n=r.find("> .eltdf-membership-repeater-fields-row");var f=!0;if(1==n.length&&"none"==n.css("display")&&(n.show(),f=!1),f){n.eq(0).find(".eltdf-membership-repeater-field").each(function(){e(this).find("select").each(function(){e(this).hasClass("eltdf-select2")&&e("select.eltdf-select2").select2("destroy")})});var c=s.data("count"),p=n.eq(0).clone(),m=!1,h=!1,u=!1,g=!1;p.find(".eltdf-membership-repeater-field").each(function(){var t=e(this),l=t.attr("id");void 0!==l&&t.attr("id",l.slice(0,-1)+c),t.find(":input, textarea").each(function(){var t=e(this);if(t.hasClass("eltdf-membership-gallery-upload-hidden")){m=!0;i(t.siblings(".eltdf-membership-gallery-upload"))}else t.hasClass("checkbox")&&(h=!0);t.val("").removeAttr("checked").removeAttr("selected"),t.is(":radio")&&t.val(r.find(":radio").length)}),t.find("select").each(function(){e(this).hasClass("eltdf-select2")&&(u=!0)})}),n.each(function(){e(this).find(".eltdf-membership-repeater-wrapper").length&&(g=!0)}),s.data("count",c+1),p.appendTo(r),t(p.find(".eltdf-membership-repeater-wrapper")),l(p),m&&(e(".eltdf-media-uploader").off("click",".eltdf-media-upload-btn"),k(),A()),h&&eltdfInitSwitch(),u&&eltdfSelect2()}}var i=e(".eltdf-membership-repeater-wrapper");i.length&&i.each(function(){t(e(this))})}function y(){var t=e(".eltdf-membership-sortable-holder"),l=t.hasClass("eltdf-enable-pc");t.sortable({handle:".eltdf-membership-repeater-sort",cursor:"move",placeholder:"placeholder",start:function(e,t){t.placeholder.height(t.item.height()),l&&(t.helper.hasClass("second-level")?(t.placeholder.removeClass("placeholder"),t.placeholder.addClass("placeholder-sub")):(t.placeholder.removeClass("placeholder-sub"),t.placeholder.addClass("placeholder")))},sort:function(e,t){if(l){var a;a=t.helper.hasClass("second-level")?t.position.left+50:t.position.left,a>=75&&!t.helper.hasClass("second-level")&&!t.helper.hasClass("eltdf-sort-parent")?(t.placeholder.removeClass("placeholder"),t.placeholder.addClass("placeholder-sub"),t.helper.addClass("second-level")):a<30&&t.helper.hasClass("second-level")&&!t.helper.hasClass("eltdf-sort-child")&&(t.placeholder.removeClass("placeholder-sub"),t.placeholder.addClass("placeholder"),t.helper.removeClass("second-level"))}}})}function C(){var t=e(".eltdf-membership-address-field");t.length&&t.each(function(){var t=e(this),l=t.find("#reset"),a=t.find("input"),s=t.find(".map_canvas"),i=t.data("country"),n=t.data("lat-field"),r=e("input[name="+n+"]"),o=t.data("long-field"),d=e("input[name="+o+"]"),f=a.val(),c=r.val(),p=d.val();a.geocomplete({map:s,details:".eltdf-membership-address-elements",detailsAttribute:"data-geo",types:["geocode","establishment"],country:i,markerOptions:{draggable:!0}}),a.bind("geocode:dragged",function(t,l){r.val(l.lat()),d.val(l.lng()),e("#reset").show(),console.log(l),a.geocomplete("map").panTo(l),(new google.maps.Geocoder).geocode({latLng:l},function(e,t){if(t==google.maps.GeocoderStatus.OK&&e[0]){var l=e[0].address_components[1].short_name,s=e[0].address_components[2].short_name,i=e[0].address_components[3].short_name,n=e[0].address_components[4].short_name;a.val(l+" "+s+" "+i+" "+n)}})}),a.on("focus",function(){var e=a.geocomplete("map");google.maps.event.trigger(e,"resize")}),l.on("click",function(){return a.geocomplete("resetMarker"),a.val(f),r.val(c),d.val(p),e("#reset").hide(),!1}),e(window).on("load",function(){a.trigger("geocode")})})}function k(){var t=e(".eltdf-membership-gallery-uploader");t.length&&t.each(function(){var t=e(this),l=t.find(".eltdf-membership-gallery-upload-hidden"),a=t.find(".eltdf-membership-gallery-upload"),s=t.parents(".eltdf-membership-gallery-holder").find(".eltdf-membership-gallery-images-holder");a.hasClass("eltdf-binded")||(l.on("change",function(t){t.target.files.length;s.empty();for(var l,a=0;l=t.target.files[a];a++){var i=new FileReader;i.onload=function(t){return function(l){"-1"!=e.inArray(t.type,["image/gif","image/jpeg","image/png"])?s.append('<li class="eltdf-membership-gallery-image"><img src="'+l.target.result+'" title="'+escape(t.name)+'"/></li>'):s.append('<li class="eltdf-membership-gallery-image"><span class="eltdf-membership-input-text">'+escape(t.name)+"</span></li>")}}(l),i.readAsDataURL(l)}}),a.on("click",function(e){e.preventDefault(),l.trigger("click")}),a.addClass("eltdf-binded"))})}function A(){var t=e(".eltdf-membership-remove-image");t.length&&t.each(function(){var t=e(this),l=t.parents(".eltdf-membership-gallery-holder").find(".eltdf-membership-gallery-images-holder"),a=t.siblings(".eltdf-membership-media-hidden");t.hasClass("eltdf-binded")||(t.on("click",function(e){e.preventDefault(),a.val(""),l.empty()}),t.addClass("eltdf-binded"))})}var S={};"undefined"!=typeof eltdf&&(eltdf.modules.socialLogin=S),S.eltdfUserLogin=n,S.eltdfUserRegister=r,S.eltdfUserLostPassword=o,S.eltdfInitLoginWidgetModal=i,S.eltdfInitFacebookLogin=f,S.eltdfInitGooglePlusLogin=m,S.eltdfUpdateUserProfile=g,S.eltdfRenderAjaxResponseMessage=d,e(document).ready(t),e(window).load(l),e(window).resize(a),e(window).scroll(s)}(jQuery);